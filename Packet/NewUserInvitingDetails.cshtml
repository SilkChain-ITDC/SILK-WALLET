@using SKC.Entity.Models
@model InvitingListPageModel
@{
    Layout = "/Views/Shared/_Layout.cshtml";

}
<style>
    .btn-danger {
        color: #fff;
        background-color: #e13c23;
        border-color: #e13c23;
    }

        .btn-danger:hover {
            color: #fff;
            background-color: #f22d4e;
            border-color: #f12143;
        }

        .btn-danger:focus, .btn-danger.focus {
            box-shadow: 0 0 0 3px rgba(244, 81, 108, 0.5);
        }

        .btn-danger.disabled, .btn-danger:disabled {
            background-color: #e13c23;
            border-color: #e13c23;
        }

        .btn-danger:active, .btn-danger.active {
            background-color: #f22d4e;
            background-image: none;
            border-color: #f12143;
        }

    .btn-lg, .btn-group-lg > .btn {
        padding: 0.65rem 1.75rem;
    }

    .m-grid.m-grid--ver-desktop.m-grid--desktop {
        display: flex;
        flex-direction: row;
    }

        .m-grid.m-grid--ver-desktop.m-grid--desktop > .m-grid__item.m-grid__item--fluid {
            flex: 1 0 auto;
        }

    .m-packet__wrapper {
        width: 430px;
        margin: 0 auto;
    }

    .m-stack.m-stack--flex-general .m-packet__wrapper {
        flex: 1 0 auto;
    }

    .m-packet__wrapper.newshare {
        padding-top: 20.5rem;
        background: url(/images/ba-active/red-packet-newshare2@(Html.GetLang()=="en"? "-en" : "").jpg) no-repeat center top;
        background-size: contain;
    }

        .m-packet__wrapper.newshare .m-packet_copybtn .share-item {
            background-color: rgba(255,255,255,0.8);
            border-color: rgba(220,137,42,0.8);
        }

        .m-packet__wrapper.newshare .m-packet_copybtn .m-pill-round {
            border-color: #ddd;
        }

        .m-packet__wrapper.newshare .m-packet_copybtn .m-packet_copy-input {
            background-color: #fff;
        }

        .m-packet__wrapper.newshare .input-group .input-group-btn > .btn.btn-secondary {
            background-color: #f5f5f5;
            border-color: #f5f5f5;
        }

        .m-packet__wrapper.newshare .m-packet_copybtn .btn-outline-primary {
            background: #e13c23;
            color: #fff;
        }

    .newjoy-wrap {
        padding: 0.5rem 1.5rem 1.5rem;
    }

        .newjoy-wrap .collar-num,
        .newjoy-wrap .draw-packet {
            background-color: rgba(255,255,255,0.8);
            border-radius: 0.5rem;
            margin-top: 1.5rem;
        }

        .newjoy-wrap .collar-num {
            padding: 0 15px 15px 15px;
        }

            .newjoy-wrap .collar-num .pri-lab {
                font-size: 1rem;
                color: #333;
                padding-left: 5px;
            }

            .newjoy-wrap .collar-num .price strong {
                font-size: 3rem;
                font-weight: bold;
                color: #ea1b33;
                line-height: 1;
            }

            .newjoy-wrap .collar-num .price .unit {
                float: right;
                font-size: 1.2rem;
                color: #ea1b33;
                margin-top: 1.7rem;
                line-height: 1;
            }

            .newjoy-wrap .collar-num .award-box {
                padding: 15px 0 10px;
                border-bottom: 1px dashed #dc892a;
                margin-bottom: 1rem;
            }

                .newjoy-wrap .collar-num .award-box .driftto {
                    font-size: 12px;
                    color: #999;
                    margin-top: 5px;
                    padding-left: 5px;
                    margin-bottom: 0;
                }

            .newjoy-wrap .collar-num .invite-p1 {
                font-size: 12px;
                color: #999;
                padding: 10px 0;
                border-bottom: 1px dashed #ddd;
                margin-bottom: 8px;
            }

            .newjoy-wrap .collar-num .invite-p2 {
                display: flex;
                justify-content: space-between;
                text-align: justify;
                border-top: 1px dashed #ddd;
                border-bottom: 1px dashed #ddd;
                margin-bottom: 15px;
                margin-top: 5px;
                padding: 5px 0;
                line-height: 2rem;
            }

                .newjoy-wrap .collar-num .invite-p2 .small-word {
                    font-size: 12px;
                    color: #999;
                }

        .newjoy-wrap .draw-packet-inner {
            width: 100%;
            height: 100%;
        }

        .newjoy-wrap .draw-packet-tle {
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            font-size: 1rem;
            color: #888;
        }

        .newjoy-wrap .rowitem {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
            position: relative;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-align-items: flex-star;
            align-items: flex-star;
        }

            .newjoy-wrap .rowitem:last-child {
                border-bottom: none;
            }

        .newjoy-wrap .rowitem-has-operate .rowitem:nth-child(2n+1) {
            border-bottom: 1px dotted #f0f0f0;
        }

        .newjoy-wrap .rowmd {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
        }

        .newjoy-wrap .rowitem-ul {
            padding: 0 15px;
        }

        .newjoy-wrap .headpic {
            float: left;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 4px;
            overflow: hidden;
            text-align: center;
            margin-right: 1rem;
        }

            .newjoy-wrap .headpic img {
                float: left;
                max-width: 100%;
            }

            .newjoy-wrap .headpic .default-img {
                display: block;
                width: 2.5rem;
                height: 2.5rem;
                background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThERUNCNTExREJCMTFFOEE2NjhGNUIwQUU1NDU1NUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThERUNCNTIxREJCMTFFOEE2NjhGNUIwQUU1NDU1NUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OERFQ0I0RjFEQkIxMUU4QTY2OEY1QjBBRTU0NTU1QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OERFQ0I1MDFEQkIxMUU4QTY2OEY1QjBBRTU0NTU1QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnOyT70AAAplSURBVHja7FwLlFVV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) no-repeat;
                background-size: cover;
            }

        .newjoy-wrap .nametxt {
            font-size: 1.15rem;
            line-height: 1;
            margin-bottom: 0.4rem;
        }

        .newjoy-wrap .datenub {
            font-size: 1em;
            color: #bbb;
            line-height: 1;
        }

        .newjoy-wrap .distrib {
            text-align: right;
            line-height: 1;
        }

        .newjoy-wrap .linefeed {
            margin-top: 0.5rem;
        }

        .newjoy-wrap .text-orange {
            color: #ff9600;
        }

        .newjoy-wrap .text-gray {
            color: #bbb;
        }

    @@media (min-width: 768px) {
        .m-packet__wrapper.newshare {
            padding-bottom: 45px;
        }
    }

    @@media (max-width: 767.98px) {
        .m-packet__wrapper {
            width: 100%;
        }
    }
</style>
<div class="m-packet__container m-stack m-stack--flex-general m-packet_popup" style="height:inherit;background-color:#ffb43c;">
    <div class="m-packet__wrapper newshare">
        <div class="newjoy-wrap">

            <div class="collar-num">
                <div class="invite-p1">@Html.GetTansByLan("inviting-packet-01", "已邀请") @Model.ItemList.Count @Html.GetTansByLan("inviting-packet-02", "个新用户注册")</div>
                <div class="pri-lab">@Model.Verified @Html.GetTansByLan("inviting-packet-03", "人通过KYC验证，让您获得:")</div>
                <div class="price"><strong>@Html.AmountFormat(Model.VerifiedAmount) </strong><span class="unit">@Html.GetTansByLan("packet-silk-alias-01", "SILK")</span></div>
                <div class="invite-p2"><span class="small-word">@(Model.Countdown < 0 ? Html.GetTansByLan("inviting-packet-12", "已过期"): (Model.Countdown.ToString() + Html.GetTansByLan("inviting-packet-04", "天后过期")))</span><span>@Model.Unverified @Html.GetTansByLan("inviting-packet-05", "人待KYC验证")</span></div>
                @if (Model.ItemList != null && Model.ItemList.Count() > 0 && !Model.IsExist)
                {
                    <button class="btn btn-block btn-danger m-btn--pill btn-lg" onclick="GetInviteRedPacket('@Model.VoucherId',0)">@Html.GetTansByLan("inviting-packet-06", "继续分享")</button>
                }
            </div>
            <div class="draw-packet">
                <div class="draw-packet-inner">
                    <div class="draw-packet-tle">@Html.GetTansByLan("inviting-packet-07", "看看大家手气")</div>
                    <div class="rowitem-ul">
                        @if (Model.ItemList != null && Model.ItemList.Count() > 0)
                        {
                            foreach (var item in Model.ItemList)
                            {
                                <div class="rowitem">
                                    <div class="rowmd">
                                        <div class="headpic"><span class="default-img">1</span></div>
                                        <div class="nametxt">
                                            @if (item.GetUserName.Length == 1)
                                            {
                                                <span>@(item.GetUserName + "*****")</span>
                                            }
                                            else if (item.GetUserName.Length == 2)
                                            {
                                                <span>@(item.GetUserName + "****")</span>
                                            }
                                            else { 
                                                <span>@(item.GetUserName.Substring(0,2) + "***" + item.GetUserName.Substring(item.GetUserName.Length - 1, 1))</span>
                                            }
                                        </div>
                                        <div class="datenub">@item.GetTime.ToString("MM-dd HH:mm")</div>
                                    </div>
                                    <div class="rowft"><div class="distrib">@Html.AmountFormat(item.GetAmount) @Html.GetTansByLan("packet-silk-alias-01", "SILK")<div class="linefeed"><span class="@(item.Status ==1 ? "" : "text-gray")">@(item.Status == 1 ? Html.GetTansByLan("inviting-packet-09", "已通过KYC认证") : Html.GetTansByLan("inviting-packet-08", "未通过KYC认证"))</span></div></div></div>
                                </div>
                            }
                        }
                        else if (string.IsNullOrEmpty(Model.Errmsg))
                        {
                            <div class="rowitem-none" style="text-align:center;margin:20px auto;color:red">@Html.GetTansByLan("packet-packetList-10", "No data available")</div>
                        }
                        else { 
                            <div class="rowitem-none" style="text-align:center;margin:20px auto;color:red">@Model.Errmsg</div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<form action="/Packet/GetPacketIndex/" method="POST" id="J_modal_add_purchase">
    <input type="hidden" id="OnlyCode" name="OnlyCode" value="" />
</form>
<script>
    function GetInviteRedPacket(id, type) {
        $.post('/Packet/GetInviteRedPacket', { VoucherId: id }, function (data) {
            if (data.statusCode > 0) {
                if (type == 0) {
                    $("#OnlyCode").val(data.errorMsg);
                    $("#J_modal_add_purchase").attr("action", "/Packet/" + data.errorMsg)
                    $("#J_modal_add_purchase").submit();
                } else {
                    window.location.href = "/Packet/NewUserInvitingDetails/" + data.errorMsg;
                }
            }
            else {
                alert(data.errorMsg);
            }
        }, 'json')
    }
</script>
